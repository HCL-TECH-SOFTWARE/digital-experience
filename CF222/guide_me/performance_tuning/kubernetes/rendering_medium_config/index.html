<!-- Elements added to main will be displayed on all pages -->
<!--March2023-->


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="HCL Digital Experience documentation for users and admins.">
      
      
      
        <link rel="canonical" href="https://opensource.hcltechsw.com/digital-experience/latest/guide_me/performance_tuning/kubernetes/rendering_medium_config/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../logstash_opensearch/">
      
      
      <link rel="icon" href="../../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.25">
    
    
      
        <title>Rendering - Medium-Sized Configuration - HCL Digital Experience Help Center</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/style.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      <!--March2023-->
<!--  OneTrust Cookies Consent Notice start  -->
<script type="text/javascript" src="https://cdn.cookielaw.org/consent/99b8d579-c52a-43c9-ab7b-a35e60de7103/OtAutoBlock.js"></script>
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" type="text/javascript" charset="UTF-8" data-domain-script="99b8d579-c52a-43c9-ab7b-a35e60de7103"></script>
<script type="text/javascript"> 
	function OptanonWrapper() { } 
</script>
<!--  OneTrust Cookies Consent Notice end  -->

<!--  Global site tag (gtag.js) - Google Analytics start -->
<script src="https://www.googletagmanager.com/gtag/js?id=G-7LF0XY95M1" class="optanon-category-C0002-C0003-C0004-C0005"></script>
<script type="text/plain" class="optanon-category-C0002-C0003-C0004-C0005">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-169645537-2');
  gtag('config', 'G-7LF0XY95M1');
</script>
 
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-TNNFCCM');</script>
  <!-- End Google Tag Manager -->
  
<!--  Global site tag (gtag.js) - Google Analytics end -->

    
    
    
  
    <meta name="robots" content="index, follow" />
  
  <meta property="og:image" content="https://opensource.hcltechsw.com/digital-experience/site-thumbnail.png" />

  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sizing-guidance-for-rendering-in-a-medium-sized-kubernetes-configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
<div>
   <a href="https://www.hcltechsw.com/"> 
  <img width="150" height="30" src="https://help.hcltechsw.com/assets/images/HCL_Software_Logo_White.svg" alt="HCL Logo" target="_blank"></a>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="dropdown">
  <button class="dropbtn">Resources <i class="fa fa-caret-down"></i></button> 
  <div class="dropdown-content">
  <a href="https://support.hcltechsw.com" target="_blank">Customer Support</a>
  <a href="https://hclsoftwareu.hcltechsw.com/hcl-dx" target="_blank">HCLSoftware U</a>
  <a href="https://support.hcltechsw.com/community" target="_blank">Community Forums</a>

</div>
</div>
  
  <!-- Uncomment the following announcement if you need it -->
  <!--
 <div class="md-banner--feedback" style="display:inline">

  <strong>We value your feedback on this site.</strong> Please report any issues you find <a class="announcement__link" href="https://github.com/HCL-TECH-SOFTWARE/digital-experience/issues">via Github</a>. 
  
  <div class="md-banner--feedback">Looking for v8.5 or v9.0? <a class="announcement__link"  href="https://help.hcltechsw.com/digital-experience/9.5/welcome_hcl_dx.html">Check the legacy Help Center.</a>
</div>  
</div>
-->

</div>

          </div>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../../../../../latest/guide_me/performance_tuning/kubernetes/rendering_medium_config/">
    <strong>Click here to go to latest.</strong>
  </a> 

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="HCL Digital Experience Help Center" class="md-header__button md-logo" aria-label="HCL Digital Experience Help Center" data-md-component="logo">
      
  <img src="../../../../assets/dx_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HCL Digital Experience Help Center
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Rendering - Medium-Sized Configuration
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/HCL-TECH-SOFTWARE/digital-experience" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    HCL-TECH-SOFTWARE/digital-experience
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../get_started/product_overview/" class="md-tabs__link">
          
  
    
  
  Get Started

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../whatsnew/cf20/newcf222/" class="md-tabs__link">
          
  
    
  
  What's New

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../deployment/" class="md-tabs__link">
          
  
    
  
  Deploy DX

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../build_sites/" class="md-tabs__link">
          
  
    
  
  Build Sites

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../manage_content/" class="md-tabs__link">
          
  
    
  
  Manage Content

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../extend_dx/" class="md-tabs__link">
          
  
    
  
  Extend DX

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../tutorials/" class="md-tabs__link">
          
  
    
  
  Guide Me

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../early_access/" class="md-tabs__link">
          
  
    
  
  Early Access

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="HCL Digital Experience Help Center" class="md-nav__button md-logo" aria-label="HCL Digital Experience Help Center" data-md-component="logo">
      
  <img src="../../../../assets/dx_logo.png" alt="logo">

    </a>
    HCL Digital Experience Help Center
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/HCL-TECH-SOFTWARE/digital-experience" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    HCL-TECH-SOFTWARE/digital-experience
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../../get_started/product_overview/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../../whatsnew/cf20/newcf222/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    What's New
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../deployment/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Deploy DX
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../build_sites/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Build Sites
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../manage_content/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Manage Content
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../extend_dx/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Extend DX
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Guide Me
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Guide Me
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../tutorials/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../wpsdirstr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Directory structure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cleanup_wcm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cleaning up WCM items
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../SecurityHardeningGuide/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Security Hardening Guide
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_5" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Performance Tuning Guides
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8_5" id="__nav_8_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_5">
            <span class="md-nav__icon md-icon"></span>
            Performance Tuning Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_5_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Kubernetes Deployments
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8_5_2" id="__nav_8_5_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_5_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_5_2">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes Deployments
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Rendering - Medium-Sized Configuration
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Rendering - Medium-Sized Configuration
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methodology" class="md-nav__link">
    <span class="md-ellipsis">
      Methodology
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Methodology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview-of-dx-rendering-sizing-performance-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Overview of DX rendering sizing-performance tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview of DX rendering sizing-performance tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wcm-default-test-data-200-pages" class="md-nav__link">
    <span class="md-ellipsis">
      WCM default test data - 200 pages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dam-default-test-data-25000-assets" class="md-nav__link">
    <span class="md-ellipsis">
      DAM default test data - 25,000 assets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pages-and-portlets-default-test-data-80-pages" class="md-nav__link">
    <span class="md-ellipsis">
      Pages and portlets default test data - 80 pages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment" class="md-nav__link">
    <span class="md-ellipsis">
      Environment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#awsnative-kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      AWS/Native Kubernetes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#db2-instance" class="md-nav__link">
    <span class="md-ellipsis">
      DB2 instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jmeter-agents" class="md-nav__link">
    <span class="md-ellipsis">
      JMeter agents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dx-core-tuning-for-concurrent-user-run" class="md-nav__link">
    <span class="md-ellipsis">
      DX core tuning for concurrent user run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#results" class="md-nav__link">
    <span class="md-ellipsis">
      Results
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conclusion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      Recommendations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logstash_opensearch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Logstash to push pod logs to OpenSearch
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../traditional_deployments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Traditional Deployments
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../search_tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips for searching the Help Center
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../early_access/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Early Access
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#methodology" class="md-nav__link">
    <span class="md-ellipsis">
      Methodology
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Methodology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview-of-dx-rendering-sizing-performance-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Overview of DX rendering sizing-performance tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview of DX rendering sizing-performance tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wcm-default-test-data-200-pages" class="md-nav__link">
    <span class="md-ellipsis">
      WCM default test data - 200 pages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dam-default-test-data-25000-assets" class="md-nav__link">
    <span class="md-ellipsis">
      DAM default test data - 25,000 assets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pages-and-portlets-default-test-data-80-pages" class="md-nav__link">
    <span class="md-ellipsis">
      Pages and portlets default test data - 80 pages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment" class="md-nav__link">
    <span class="md-ellipsis">
      Environment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#awsnative-kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      AWS/Native Kubernetes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#db2-instance" class="md-nav__link">
    <span class="md-ellipsis">
      DB2 instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jmeter-agents" class="md-nav__link">
    <span class="md-ellipsis">
      JMeter agents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dx-core-tuning-for-concurrent-user-run" class="md-nav__link">
    <span class="md-ellipsis">
      DX core tuning for concurrent user run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#results" class="md-nav__link">
    <span class="md-ellipsis">
      Results
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conclusion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      Recommendations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="sizing-guidance-for-rendering-in-a-medium-sized-kubernetes-configuration">Sizing guidance for rendering in a medium-sized Kubernetes configuration</h1>
<h2 id="introduction">Introduction</h2>
<p>In Digital Experience (DX) performance testing, it is important to determine both DX container sizing and the relationships between the components that make up DX. The goal of performance testing is to identify the optimal Kubernetes configurations for varying levels of DX demands, ranging from small to large setups. This sizing guidance examines these factors in a configuration using 10,000 Virtual Users.</p>
<p>In this investigation, the key performance indicators are the number of concurrent users, the average response time, and throughput. These metrics serve as benchmarks for evaluating the performance of a medium DX configuration, providing insights into the system's ability to handle specific loads. This topic also explores the impact of core tuning adjustments, pod scaling, node scaling, and pod configuration modifications on enhancing system responsiveness. This sizing guidance shows how strategic changes can lead to significant improvements in performance.</p>
<p>The sizing tests examined rendering scenarios for Web Content Manager (WCM), portlets, and Digital Asset Management (DAM). The tests were facilitated by a rendering setup deployed on AWS/Native-Kubernetes (Kubernetes installed directly in Amazon EC2 instances). This topic presents a comprehensive overview of the findings, offering guidance for organizations seeking to optimize their DX platforms for peak performance.</p>
<h2 id="methodology">Methodology</h2>
<h3 id="overview-of-dx-rendering-sizing-performance-tests">Overview of DX rendering sizing-performance tests</h3>
<p>This sizing work consisted of rendering scenarios of WCM, portlets, and DAM with a rendering setup enabled in AWS/Native-Kubernetes (Kubernetes installed directly in Amazon EC2 instances). A combination run was performed that rendered WCM content, DAM assets, and DX pages and portlets. The load distribution was WCM content (40%), DAM assets (30%), and DX pages and portlets (30%). All systems were pre-populated before performing the rendering tests.</p>
<p>To achieve the 10,000 concurrent users mark, an initial set of runs was done with a lower number of users on a multiple node setup with varying numbers of worker nodes. The tests started with three worker nodes. The number of worker nodes and pods was increased as needed to achieve the desired load with an acceptable error rate (&lt; 0.01%). After establishing the number of nodes, further steps were taken to optimize the limits on the available resources for each pod, as well as the ratios of key pods to each other.</p>
<p>The following sections provide details for the <a href="#wcm-default-test-data-200-pages">WCM default test data - 200 pages</a>, <a href="#dam-default-test-data-25000-assets">DAM default test data - 25,000 assets</a>, and <a href="#pages-and-portlets-default-test-data-80-pages">Pages and portlets default test data - 80 pages</a>.</p>
<h4 id="wcm-default-test-data-200-pages">WCM default test data - 200 pages</h4>
<p>This setup is common in most of the scenarios where there are multi-nested site areas in libraries with content such as rich text, PDF files, and images in a page and nearly 200 pages in a medium configuration. Refer to the following list for more information about this setup:</p>
<ul>
<li>
<p>The default test data has a WCM design library called "PerformanceTestDesign" and five content libraries named "PerformanceTestContent01" through "PerformanceTestContent05".</p>
</li>
<li>
<p>Each content library contains four levels of site areas, with four site areas per level. Only the 256 leaf site areas contain content.</p>
</li>
<li>
<p>Each leaf site area contains ten content items, for a total of 12,800 content items across the libraries.</p>
</li>
<li>
<p>Half of the content items are visible to "Anonymous" and "All Authenticated" users. The other half are visible only to members of ten groups per content item. These ten groups are spread out among the 500 groups assumed to exist in the test LDAP (and assumed to be called "Group0000" through "Group0499").</p>
</li>
<li>
<p>Half of the content items visible to members of ten groups per content item are profiled with the keyword "MENU".</p>
</li>
<li>
<p>There are 20 test portal pages created under the label "PerformanceTest". Each has a friendly URL of the form "<context-root>/perf/page-xx".</p>
</li>
<li>
<p>Each page contains six WCM viewer portlets that show content below one of the twenty top level site areas. Pages 01 to 04 show content from site areas "SA01" through "SA04" in library "PerformanceTestContent01". Pages 05 to 08 show content from site areas "SA01" through "SA04" in library "PerformanceTestContent02", and so on.</p>
</li>
<li>
<p>Four of the portlets on each page show single content items. For page 01, these would be the first content items in site areas "SA01.01.01.01", "SA01.02.01.01", "SA01.03.01.01", and "SA01.04.01.01" respectively. Other pages follow the same pattern.</p>
</li>
<li>
<p>Another portlet on each page shows a navigator of site areas and content items below the same top-level area.</p>
</li>
<li>
<p>The final portlet on each page shows a menu of items. This portlet is scoped to the top-level site area and selects only those items profiled with the "MENU" keyword.</p>
</li>
<li>
<p>A total of 99999 users was added to openLDAP as authenticated users.</p>
</li>
</ul>
<h4 id="dam-default-test-data-25000-assets">DAM default test data - 25,000 assets</h4>
<p>The following DAM setup covers the mix and match of the different types of most commonly used assets in three different ways: UUID, custom, and friendly URLs. Testers uploaded 25,000 assets. These assets include images (136 KB, .jpg), documents (199 KB, .docx), and videos (1.1 MB, .mp4) to preheat the environment. After preloading 25,000 assets, 15 assets containing a mix of original images and renditions were uploaded and rendered for 1 hour at peak load after ramp-up time.</p>
<p>The test then rendered those assets by way of 3 custom URLs, 8 UUID URLs, and 8 short URLs for an hour. Further details provided in the following summary of the results.</p>
<table>
<thead>
<tr>
<th>Asset</th>
<th>Type</th>
<th>Size</th>
</tr>
</thead>
<tbody>
<tr>
<td>Image</td>
<td>JPG/PNG/TIF</td>
<td>155 KB, 2 MB, 5 MB, 500 KB, 100 KB, 2 MB, 300 KB</td>
</tr>
<tr>
<td>Video</td>
<td>MP4/WebM</td>
<td>MP4 - 1MB, 15 MB, 100 MB<br> WebM - 2 MB</td>
</tr>
<tr>
<td>Document</td>
<td>DOCX/XLSX/PPTX</td>
<td>5 MB, 199 KB, 200 KB, 2 MB, 199 KB</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>Examples of DAM asset rendering APIs of UUID, Custom URL, and Friendly URL:</p>
<ul>
<li>
<p>UUID - <code>https://&lt;host-name&gt;/dx/api/dam/v1/collections/f5764415-afd3-4b18-90ab-5c933e9965a8/items/b2204c8f-bd26-4f9b-865f-1fc1f8e26a13/renditions/09d278d6-1ae7-4a2a-950d-c1fa7f0bacde?binary=true</code></p>
</li>
<li>
<p>Custom - <code>https://&lt;host-name&gt;/dx/api/dam/custom/customURL2-1715776542673?binary=true</code></p>
</li>
<li>
<p>Fiendly - <code>https://&lt;host-name&gt;/dx/api/dam/v1/assets/Jmeter.11667/wcm-sample-content.png?rendition=Tablet?binary=true</code></p>
</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For DAM, only anonymous rendering is available.</p>
</div>
<h4 id="pages-and-portlets-default-test-data-80-pages">Pages and portlets default test data - 80 pages</h4>
<p>The following pages and portlets setup covers the different types of the most commonly used portlets as listed in this section. Performance tests include the response time for rendering the whole page with the portlet. Knowing the response times for rendering pages is important because these portlets are often used in DX content.</p>
<p>The tests used a total of eight unique pages with portlets. To complete authoring and rendering, both anonymous and authenticated users received access. The same users were added in openLDAP as for WCM rendering. All authenticated users are assigned the User role. The pages in the following list are duplicated 10 times with different page numbers, resulting in 80 pages.</p>
<p>As part of authoring, pages and portlets were added manually. The list shows the details of portlets for authoring on every page.</p>
<ul>
<li>Page 1 - 2 Articles</li>
<li>Page 2 - 2 Rich text</li>
<li>Page 3 - Login portlet</li>
<li>Page 4 - Information portlet (JSR) - JSP file -  jsp/oob/welcome.jsp </li>
<li>Page 5 - Search Center portlet</li>
<li>Page 6 - Custom JSF portlet with simple form (Disable this portlet for now.)</li>
<li>Page 7 - Script Application portlet (Added JavaScript Functions and Date and Time object examples)</li>
<li>Page 8 - Added all mentioned portlets in this section except JSF portlet</li>
</ul>
<p>After completing the authoring steps, the anonymous portal user and authenticated users (added to openLDAP) must render the pages. Every page request uses a /GET API call (for example, /wps/portal/portletsperf/page1) and there is a response assertion in a sampler to validate the content html in the response body.</p>
<h2 id="environment">Environment</h2>
<p>This section provides details for the Kubernetes cluster, Jmeter, LDAP, and database.</p>
<h3 id="awsnative-kubernetes">AWS/Native Kubernetes</h3>
<ul>
<li>
<p>A Kubernetes platform is running on an AWS Elastic Compute Cloud (EC2) instance with the DX images installed and configured. </p>
</li>
<li>
<p>In AWS/Native Kubernetes, the tests are executed in EC2 instances with one master (c5.xlarge) and four worker nodes (c5.4xlarge). </p>
</li>
<li>
<p>The tests used a remote DB2 instance for the core database (c5.2xlarge).</p>
</li>
<li>
<p>The tests started with worker node type c5.2xlarge, then moved to c5.4xlarge after analyzing test results and observations.</p>
</li>
<li>
<p>c5.4xlarge</p>
<ul>
<li>Information</li>
</ul>
<p><img alt="" src="../../../../images/Header-1-AWS-Med.png" width="1000" /></p>
<p><img alt="" src="../../../../images/ec2_c5_4xlarge_info.png" width="1000" /></p>
<ul>
<li>Processor details</li>
</ul>
<p><img alt="" src="../../../../images/c5_4xlarge_cpu_info.png" width="1000" /></p>
<ul>
<li>Volume details</li>
</ul>
<p><img alt="" src="../../../../images/c5_4xlarge_volume_info.png" width="600" /></p>
</li>
<li>
<p>c5.large</p>
<ul>
<li>Information</li>
</ul>
<p><img alt="" src="../../../../images/Header-1-AWS-Med.png" width="1000" /></p>
<p><img alt="" src="../../../../images/ec2_c5_large_info.png" width="1000" /></p>
<ul>
<li>Processor details</li>
</ul>
<p><img alt="" src="../../../../images/c5_large_cpu_info.png" width="1000" /></p>
<ul>
<li>Volume details</li>
</ul>
<p><img alt="" src="../../../../images/c5_large_volume_info.png" width="600" /></p>
</li>
</ul>
<h3 id="db2-instance">DB2 instance</h3>
<ul>
<li>
<p>Remote DB2 - [c5.2xlarge]</p>
<p><img alt="" src="../../../../images/Header-1-AWS-Med.png" width="1000" /></p>
<p><img alt="" src="../../../../images/C5.2xlarge.png" width="1000" /></p>
</li>
<li>
<p>Processor details</p>
<p><img alt="" src="../../../../images/Processor_Info_RemoteDB2_Med.png" width="600" /></p>
</li>
<li>
<p>Volume details</p>
<p><img alt="" src="../../../../images/Remote-DB2-Volume-Info-Med.png" width="600" /></p>
</li>
</ul>
<h3 id="jmeter-agents">JMeter agents</h3>
<ul>
<li>
<p>JMeter instance - [c5.2xlarge]</p>
</li>
<li>
<p>To run the tests, a distributed AWS/JMeter agents setup consisting of one primary and eight subordinates was used.</p>
<p><img alt="" src="../../../../images/Header-1-AWS-Med.png" width="1000" /></p>
<p><img alt="" src="../../../../images/C5.2xlarge.png" width="1000" /></p>
</li>
<li>
<p>Processor details</p>
<p><img alt="" src="../../../../images/Processor_Info_RemoteDB2_Med.png" width="600" /></p>
</li>
<li>
<p>Volume details</p>
<p><img alt="" src="../../../../images/Remote-DB2-Volume-Info-Med.png" width="600" /></p>
</li>
<li>
<p>Processor details</p>
<p><img alt="" src="../../../../images/Processor_Info_Native-Kube.png" width="600" /></p>
</li>
<li>
<p>Volume details</p>
<p><img alt="" src="../../../../images/AWS-Native-Kube-Volume-Info.png" width="600" /></p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ramp-up time is 1.5 seconds per user. Test duration is the total of ramp-up time and 1 hour with peak load of concurrent users.</p>
</div>
<h3 id="dx-core-tuning-for-concurrent-user-run">DX core tuning for concurrent user run</h3>
<p>The following list contains details of tuning and enhancements done to DX core during testing:</p>
<ul>
<li>
<p>Defined the initial deployment as a rendering environment to trigger the tuning task for initial tuning. For more information, see <a href="../../../../deployment/manage/tune_servers/wp_tune_tool/">Portal server performance tuning tool</a>.</p>
</li>
<li>
<p>LTPA token timeout increased from 120 minutes to 480 minutes for rendering tests execution.</p>
<p><img alt="" src="../../../../images/Core_Tuning_LTPA.png" width="1000" /></p>
</li>
<li>
<p>WCM object cache for rendering is updated as per <a href="../../traditional_deployments/">DX Core tuning guide</a>.</p>
<p><img alt="" src="../../../../images/Core_WCM_Object_Cache_list.png" width="1000" /></p>
<p><img alt="" src="../../../../images/WCM_Object_Cache_Instances.png" width="1000" /></p>
</li>
<li>
<p>Updated abspath, abspathreverse, processing, session, strategy, summary values, and WCM rendering values as per <a href="../../traditional_deployments/">DX Core tuning guide</a>.</p>
</li>
<li>
<p>Added a new custom property under <strong>Resource environment providers &gt; WP CacheManagerService &gt; Custom properties &gt; cacheinstance.com.ibm.wps.resolver.friendly.cache.size</strong>.</p>
<p><img alt="" src="../../../../images/Core_Friendly_Url_Cache.png" width="1000" /></p>
</li>
<li>
<p>Adjusted JVM Heap size from 3584 to 4096 under <strong>Application servers &gt; WebSphere_Portal &gt; Process_definition &gt; Java Virtual Machine</strong>.</p>
<p><img alt="" src="../../../../images/Core_JVM_Tuning.png" width="1000" /></p>
</li>
<li>
<p>Set LDAP user cache attributes and search to 10000.</p>
<p><img alt="" src="../../../../images/Core_DX_LDAP_User_Cache.png" width="1000" /></p>
</li>
<li>
<p>Disabled jcr.text.search under <strong>Resource environment providers &gt; JCR ConfigService Portal Content &gt; Custom properties</strong> because there is currently no authoring search functionality in these tests.</p>
<p><img alt="" src="../../../../images/Core_Tuning_JCR_Text_Search_Disable.png" /></p>
</li>
<li>
<p>Deleted search collections in <strong>Portal &gt; Administration &gt; Search &gt; Search collections</strong> (both JCRCollection1 and Default Search Collection).</p>
<p><img alt="" src="../../../../images/Core_Tuning_Delete_Search_Collections.png" /></p>
</li>
<li>
<p>Logged level changes from info to severe in WAS for both configuration and run time.</p>
<p><img alt="" src="../../../../images/Core_Tuning_Log_Level_Details.png" width="1000" /></p>
</li>
<li>
<p>DB2 tuning performed by executing DB2 Reorg and Runstats.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>
<p>Neither fragment caching nor static resource caching were enabled to trigger actual stress and processing. In a customer scenario, it is recommended to enable both fragment caching and static resource caching. </p>
</li>
<li>
<p>For DAM, no tuning details are mentioned in this topic except the pod resources like CPU and memory limits for all pods related to DAM (for example, ring-api, persistence-node, persistence-connection-pool, and core). Because DAM uses Node.js, you can monitor CPU and memory usage using Prometheus and Grafana. You can have CPU and memory requests and limits in Kubernetes to have good response times and throughput.</p>
</li>
</ul>
</div>
<h2 id="results">Results</h2>
<p>The initial sets of tests were run on an AWS-distributed Kubernetes setup with one master and three worker nodes. Concurrent user loads of 1,000, 2,500, 4,000, and 5,000 users were successful, as measured by a low error rate (&lt; 0.0001%) and satisfactory response times. At 8,000 users, this was no longer the case because the response times increased dramatically and the error rates went up as well.</p>
<p>The tests then moved to a setup with four worker nodes and 10,000 concurrent users. The error rates were low (&lt;0.0001%) and response times were satisfactory. At this point, alterations were made to the number of pods, CPU, and memory of each of the following containers: HAProxy, Core, RingAPI, digitalAssetManagement, persistenceNode, and persistenceConnectionPool. The alterations to these containers aimed to determine which factors were significantly beneficial.</p>
<p>For the HAProxy container, increasing the CPU dramatically increased throughput. When the number of HAProxy pods was increased, the throughput decreased.</p>
<p>For the Core pod, increasing the CPU limit gave a boost to performance but this effect eventually saturated at 5600 millicore. Increasing the number of Core pods at this point had additional benefits. </p>
<h2 id="conclusion">Conclusion</h2>
<p>There are several factors that can affect the performance of DX in Kubernetes. Changes in the number of running nodes, number of pods, and the capacity of individual pods can  improve the performance of DX. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Performance tuning for a Kubernetes DX cluster must be conducted for the particular workloads involving the number of concurrent users. Generally, these recommendations are intended to speed up tuning for others. Refer to the <a href="../../traditional_deployments/">DX Core tuning guide</a> for further enhancements.</p>
</div>
<h3 id="recommendations">Recommendations</h3>
<ul>
<li>
<p>For a medium-sized workload in AWS, the Kubernetes cluster should begin with one master and four worker nodes. </p>
</li>
<li>
<p>For the HAProxy and RingApi containers, increasing the CPU increases throughput, but increasing the number of pods does not.</p>
</li>
<li>
<p>For DAM and persistence node pods, CPU limits were increased due to the observations from Grafana about the usage of CPU and memory on the load test. After this initial change, increasing the pod replicas boosted the performance and handling of the 10,000 concurrent users load. For DAM, increasing the number of pods increases throughput.</p>
</li>
<li>
<p>For testing purposes, OpenLDAP pod values were also increased for holding more authenticated users for rendering. However, the OpenLDAP pod is not for production use.</p>
</li>
<li>
<p>For optimizing the Core container, start with increasing the CPU until this saturates. After the optimal CPU level is determined, increase the number of pods to increase performance.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not size your JVM Heap size larger than the allotted memory for the pod.</p>
</div>
<p>There were a number of alterations done to the initial Helm chart configuration. The following table contains the number and limits for each pod. Using these values significantly improves the responsiveness of the setup and enables the system to handle 10,000 concurrent users with a vastly improved average response time and a minimal error rate.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th style="text-align: right;">Request</th>
<th>Request</th>
<th>Limit</th>
<th>Limit</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Component</strong></td>
<td><strong>No. of pods</strong></td>
<td style="text-align: right;"><strong>cpu (m)<br></strong></td>
<td><strong>memory (Mi)<br></strong></td>
<td><strong>cpu (m)<br></strong></td>
<td><strong>memory (Mi)<br></strong></td>
</tr>
<tr>
<td>contentComposer</td>
<td>1</td>
<td style="text-align: right;">100</td>
<td>128</td>
<td>100</td>
<td>128</td>
</tr>
<tr>
<td><strong>core</strong></td>
<td><strong>7</strong></td>
<td style="text-align: right;"><strong>5600</strong></td>
<td><strong>8192</strong></td>
<td><strong>5200</strong></td>
<td><strong>8192</strong></td>
</tr>
<tr>
<td><strong>digitalAssetManagement</strong></td>
<td><strong>4</strong></td>
<td style="text-align: right;"><strong>1000</strong></td>
<td><strong>2048</strong></td>
<td><strong>1000</strong></td>
<td><strong>2048</strong></td>
</tr>
<tr>
<td>imageProcessor</td>
<td>1</td>
<td style="text-align: right;">200</td>
<td>2048</td>
<td>200</td>
<td>2048</td>
</tr>
<tr>
<td><strong>openLdap</strong></td>
<td><strong>1</strong></td>
<td style="text-align: right;"><strong>500</strong></td>
<td><strong>2048</strong></td>
<td><strong>500</strong></td>
<td><strong>2048</strong></td>
</tr>
<tr>
<td><strong>persistenceNode</strong></td>
<td><strong>2</strong></td>
<td style="text-align: right;"><strong>1200</strong></td>
<td><strong>2048</strong></td>
<td><strong>1000</strong></td>
<td><strong>2048</strong></td>
</tr>
<tr>
<td><strong>persistenceConnectionPool</strong></td>
<td><strong>2</strong></td>
<td style="text-align: right;"><strong>700</strong></td>
<td><strong>1024</strong></td>
<td><strong>700</strong></td>
<td><strong>1024</strong></td>
</tr>
<tr>
<td><strong>ringApi</strong></td>
<td><strong>2</strong></td>
<td style="text-align: right;"><strong>2000</strong></td>
<td><strong>512</strong></td>
<td><strong>2000</strong></td>
<td><strong>512</strong></td>
</tr>
<tr>
<td>runtimeController</td>
<td>1</td>
<td style="text-align: right;">100</td>
<td>256</td>
<td>100</td>
<td>256</td>
</tr>
<tr>
<td><strong>haproxy</strong></td>
<td><strong>2</strong></td>
<td style="text-align: right;"><strong>2000</strong></td>
<td><strong>1024</strong></td>
<td><strong>2000</strong></td>
<td><strong>1024</strong></td>
</tr>
<tr>
<td>licenseManager</td>
<td>1</td>
<td style="text-align: right;">100</td>
<td>300</td>
<td>100</td>
<td>300</td>
</tr>
<tr>
<td><strong>Total</strong></td>
<td></td>
<td style="text-align: right;"><strong>60000</strong></td>
<td><strong>79532</strong></td>
<td><strong>60000</strong></td>
<td><strong>79532</strong></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Values in bold are tuned Helm values while the rest are default minimal values.</p>
</div>
<p>For convenience, these values were added to the <code>medium-config-values.yaml</code> file in the hcl-dx-deployment Helm chart. To use these values, complete the following steps:</p>
<ol>
<li>
<p>Download the Helm chart from FlexNet or Harbor.</p>
</li>
<li>
<p>Extract the TGZ file (<code>hcl-dx-deployment-XXX.tgz</code>).</p>
</li>
<li>
<p>In the extracted folder, navigate to the following structure to go to the <code>medium-config-values.yaml</code> file: <code>hcl-dx-deployment/value-samples/medium-config-values.yaml</code>.</p>
</li>
</ol>
<details class="info" open="open">
<summary>Related information</summary>
<ul>
<li><a href="../../traditional_deployments/">DX Performance Tuning Guide</a></li>
</ul>
</details>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 5, 2024</span>
  </span>

    
    
    
    
  </aside>


  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019-2024, HCL Technologies Limited -  <a href="#__consent">Change cookie settings</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/HCL-TECH-SOFTWARE" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.top", "navigation.instant", "navigation.prune", "search.highlight", "search.share", "search.suggest", "navigation.prune", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.081f42fc.min.js"></script>
      
        <script src="../../../../javascripts/extra.js"></script>
      
    
  </body>
</html>