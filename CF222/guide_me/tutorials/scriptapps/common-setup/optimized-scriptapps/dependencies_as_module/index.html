<!-- Elements added to main will be displayed on all pages -->
<!--March2023-->


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="HCL Digital Experience documentation for users and admins.">
      
      
      
        <link rel="canonical" href="https://opensource.hcltechsw.com/digital-experience/latest/guide_me/tutorials/scriptapps/common-setup/optimized-scriptapps/dependencies_as_module/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../sharing_dependencies/">
      
      
      <link rel="icon" href="../../../../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.25">
    
    
      
        <title>Dependencies as DX Modules - HCL Digital Experience Help Center</title>
      
    
    
      <link rel="stylesheet" href="../../../../../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../../assets/stylesheets/style.css">
    
    <script>__md_scope=new URL("../../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      <!--March2023-->
<!--  OneTrust Cookies Consent Notice start  -->
<script type="text/javascript" src="https://cdn.cookielaw.org/consent/99b8d579-c52a-43c9-ab7b-a35e60de7103/OtAutoBlock.js"></script>
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" type="text/javascript" charset="UTF-8" data-domain-script="99b8d579-c52a-43c9-ab7b-a35e60de7103"></script>
<script type="text/javascript"> 
	function OptanonWrapper() { } 
</script>
<!--  OneTrust Cookies Consent Notice end  -->

<!--  Global site tag (gtag.js) - Google Analytics start -->
<script src="https://www.googletagmanager.com/gtag/js?id=G-7LF0XY95M1" class="optanon-category-C0002-C0003-C0004-C0005"></script>
<script type="text/plain" class="optanon-category-C0002-C0003-C0004-C0005">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-169645537-2');
  gtag('config', 'G-7LF0XY95M1');
</script>
 
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-TNNFCCM');</script>
  <!-- End Google Tag Manager -->
  
<!--  Global site tag (gtag.js) - Google Analytics end -->

    
    
    
  
    <meta name="robots" content="index, follow" />
  
  <meta property="og:image" content="https://opensource.hcltechsw.com/digital-experience/site-thumbnail.png" />

  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dependencies-as-dx-modules" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
<div>
   <a href="https://www.hcltechsw.com/"> 
  <img width="150" height="30" src="https://help.hcltechsw.com/assets/images/HCL_Software_Logo_White.svg" alt="HCL Logo" target="_blank"></a>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="dropdown">
  <button class="dropbtn">Resources <i class="fa fa-caret-down"></i></button> 
  <div class="dropdown-content">
  <a href="https://support.hcltechsw.com" target="_blank">Customer Support</a>
  <a href="https://hclsoftwareu.hcltechsw.com/hcl-dx" target="_blank">HCLSoftware U</a>
  <a href="https://support.hcltechsw.com/community" target="_blank">Community Forums</a>

</div>
</div>
  
  <!-- Uncomment the following announcement if you need it -->
  <!--
 <div class="md-banner--feedback" style="display:inline">

  <strong>We value your feedback on this site.</strong> Please report any issues you find <a class="announcement__link" href="https://github.com/HCL-TECH-SOFTWARE/digital-experience/issues">via Github</a>. 
  
  <div class="md-banner--feedback">Looking for v8.5 or v9.0? <a class="announcement__link"  href="https://help.hcltechsw.com/digital-experience/9.5/welcome_hcl_dx.html">Check the legacy Help Center.</a>
</div>  
</div>
-->

</div>

          </div>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../../../../../../../latest/guide_me/tutorials/scriptapps/common-setup/optimized-scriptapps/dependencies_as_module/">
    <strong>Click here to go to latest.</strong>
  </a> 

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../../.." title="HCL Digital Experience Help Center" class="md-header__button md-logo" aria-label="HCL Digital Experience Help Center" data-md-component="logo">
      
  <img src="../../../../../../assets/dx_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HCL Digital Experience Help Center
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dependencies as DX Modules
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/HCL-TECH-SOFTWARE/digital-experience" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    HCL-TECH-SOFTWARE/digital-experience
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../get_started/product_overview/" class="md-tabs__link">
          
  
    
  
  Get Started

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../whatsnew/cf20/newcf222/" class="md-tabs__link">
          
  
    
  
  What's New

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../deployment/" class="md-tabs__link">
          
  
    
  
  Deploy DX

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../build_sites/" class="md-tabs__link">
          
  
    
  
  Build Sites

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../manage_content/" class="md-tabs__link">
          
  
    
  
  Manage Content

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../extend_dx/" class="md-tabs__link">
          
  
    
  
  Extend DX

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../../" class="md-tabs__link">
          
  
    
  
  Guide Me

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../early_access/" class="md-tabs__link">
          
  
    
  
  Early Access

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../../.." title="HCL Digital Experience Help Center" class="md-nav__button md-logo" aria-label="HCL Digital Experience Help Center" data-md-component="logo">
      
  <img src="../../../../../../assets/dx_logo.png" alt="logo">

    </a>
    HCL Digital Experience Help Center
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/HCL-TECH-SOFTWARE/digital-experience" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    HCL-TECH-SOFTWARE/digital-experience
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../../../../get_started/product_overview/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../../../../../whatsnew/cf20/newcf222/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    What's New
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../../../deployment/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Deploy DX
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../../../build_sites/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Build Sites
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../../../manage_content/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Manage Content
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../../../extend_dx/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Extend DX
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Guide Me
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Guide Me
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_1">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../gettingstartedwithDX/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started with HCL Digital Experience
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../access-software/register-for-access/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Access Software and Support
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_1_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Script Applications
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8_1_4" id="__nav_8_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_1_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_1_4">
            <span class="md-nav__icon md-icon"></span>
            Script Applications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pre_requisites/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pre-requisites
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_1_4_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Common Setup
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8_1_4_3" id="__nav_8_1_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_1_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_1_4_3">
            <span class="md-nav__icon md-icon"></span>
            Common Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../basic-scriptapp/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Basic Script Applications
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_1_4_3_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Optimized Script Applications
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8_1_4_3_3" id="__nav_8_1_4_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_8_1_4_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_1_4_3_3">
            <span class="md-nav__icon md-icon"></span>
            Optimized Script Applications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Dependencies as DX Modules
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Dependencies as DX Modules
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-a-gradle-project-for-common-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Gradle Project for Common Dependencies
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create a Gradle Project for Common Dependencies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-project-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Initial Project Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-gradle-build-script" class="md-nav__link">
    <span class="md-ellipsis">
      Add a Gradle Build Script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-webpack-files" class="md-nav__link">
    <span class="md-ellipsis">
      Add Webpack Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-websphere-files" class="md-nav__link">
    <span class="md-ellipsis">
      Setup WebSphere Files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sharing_dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Script Applications Sharing Dependencies
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../build-and-deploy/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Build and Deploy
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../post-deployment/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Post Deployment
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../site_integration/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Site Integration
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../how_to/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    How-To Guides
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../samples/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Sample DX Sites
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Portletdevelopmentutilitiesandpagecreationsamples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Portlet development utilities and page creation samples on HCL GitHub
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../wpsdirstr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Directory structure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../cleanup_wcm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cleaning up WCM items
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../../SecurityHardeningGuide/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Security Hardening Guide
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../../performance_tuning/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Performance Tuning Guides
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../search_tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips for searching the Help Center
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../../../../early_access/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Early Access
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-a-gradle-project-for-common-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Gradle Project for Common Dependencies
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create a Gradle Project for Common Dependencies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-project-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Initial Project Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-gradle-build-script" class="md-nav__link">
    <span class="md-ellipsis">
      Add a Gradle Build Script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-webpack-files" class="md-nav__link">
    <span class="md-ellipsis">
      Add Webpack Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-websphere-files" class="md-nav__link">
    <span class="md-ellipsis">
      Setup WebSphere Files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  
  

<nav class="md-tags" hidden>
  
    
    
    
      <span class="md-tag">React</span>
    
  
    
    
    
      <span class="md-tag">Script Application</span>
    
  
    
    
    
      <span class="md-tag">Gradle</span>
    
  
    
    
    
      <span class="md-tag">Theme Module</span>
    
  
</nav>


  
  


<h1 id="dependencies-as-dx-modules">Dependencies as DX Modules</h1>
<p>This guide provides a streamlined build process that will automate the creation of the EAR file of DX modules and provides the capability to upload it to the WebSphere Application Server.</p>
<p>This Gradle Project includes the following areas of functionality:</p>
<ul>
<li><a href="https://webpack.js.org/">Webpack</a> build script to package JavaScript libraries into a Web Archive (WAR) file</li>
<li>Replacement of names and labels in WebSphere deployment descriptors. </li>
<li>Packaging of the WAR file into an Enterprise Application Archive (EAR) file</li>
<li>Deployment of the DX Module (EAR file) to WebSphere via DXClient</li>
</ul>
<h2 id="create-a-gradle-project-for-common-dependencies">Create a Gradle Project for Common Dependencies</h2>
<p>Create a Gradle project to bundle the common dependencies of multiple Script Applications into a DX Module. DX Modules are artifacts that may include Javascript and Styling (CSS, SCSS) files that DX can then inject into the HTML header of the DX Pages. Frontend modules are aggregated by DX and then cached by browsers by default and will deliver performance improvements to the loading sequence of DX pages.</p>
<h3 id="initial-project-creation">Initial Project Creation</h3>
<ol>
<li>Create a DxModule/ folder.</li>
<li>
<p>Add gradle wrapper scripts and library into the DxModule folder.</p>
<ul>
<li>Copy files from existing gradle projects. Recreate the folder structure in your new project.<ul>
<li>gradle/wrapper/gradle-wrapper.jar</li>
<li>gradle/wrapper/gradle-wrapper.properties</li>
<li>gradlew</li>
<li>gradlew.bat</li>
</ul>
</li>
<li>OR <a href="https://gradle.org/install/">install gradle</a> and run <a href="https://docs.gradle.org/current/userguide/gradle_wrapper.html#sec:adding_wrapper">gradle wrapper</a>.</li>
</ul>
</li>
<li>
<p>Create submodules folder for each group of dependencies. Use only one submodule folder if it's the requirement for this setup.</p>
<p>Sample:</p>
<ul>
<li>React v16 -&gt; DxModule/SubModuleReact16</li>
<li>React v18 -&gt; DxModule/SubModuleReact18</li>
</ul>
</li>
<li>
<p>Create a DxModule/gradle.properties file and set the node and npm versions required. Set nodeInstall to false if the existing executables of the current environment is preferred. The gradle project included in this guide is going to be capable of downloading and using its own set of node and npm executables for the build process.
    <div class="language-properties highlight"><pre><span></span><code><span class="na">nodeInstall</span><span class="o">=</span><span class="s">true</span>
<span class="na">nodeVersion</span><span class="o">=</span><span class="s">16.17.0</span>
<span class="na">npmVersion</span><span class="o">=</span><span class="s">8.15.0</span>
</code></pre></div>
    Add the details of the DX deployment target. They will be relayed as parameters whenever the DXClient executable is called by the deploy tasks.
    <div class="language-properties highlight"><pre><span></span><code><span class="na">dxProtocol</span><span class="o">=</span><span class="s">https</span>
<span class="na">dxHostname</span><span class="o">=</span><span class="s">localhost</span>
<span class="na">dxPort</span><span class="o">=</span><span class="s">10041</span>
<span class="na">dxProfileName</span><span class="o">=</span><span class="s">wp_profile</span>
</code></pre></div>
    Add the folder names for the submodules and Script Applications. Use only one submodule and/or Script Application folder each if it's the requirement for this setup.</p>
<ul>
<li>Single SubModule
<div class="language-properties highlight"><pre><span></span><code><span class="w"> </span><span class="c1"># SubModules</span>
<span class="w"> </span><span class="na">subModulesCSV</span><span class="o">=</span><span class="s">SubModule01</span>

<span class="w"> </span><span class="c1"># ScriptApp Projects</span>
<span class="w"> </span><span class="na">baseFolder</span><span class="o">=</span><span class="s">../</span>
<span class="w"> </span><span class="c1">## last subfolder of path (i.e: subfolder1/subfolder2 --&gt; subfolder2) must be unique to avoid overlapping gradle task names</span>
<span class="w"> </span><span class="c1">## verify using ./gradlew tasks</span>
<span class="w"> </span><span class="na">scriptAppFoldersCSV</span><span class="o">=</span><span class="s">ScriptApp01</span>
</code></pre></div></li>
<li>Multiple SubModules
<div class="language-properties highlight"><pre><span></span><code><span class="w"> </span><span class="c1"># SubModules</span>
<span class="w"> </span><span class="na">subModulesCSV</span><span class="o">=</span><span class="s">SubModuleReact16,SubModuleReact18</span>

<span class="w"> </span><span class="c1"># ScriptApp Projects</span>
<span class="w"> </span><span class="na">baseFolder</span><span class="o">=</span><span class="s">../</span>
<span class="w"> </span><span class="c1">## last subfolder of path (i.e: subfolder1/subfolder2 --&gt; subfolder2) must be unique to avoid overlapping gradle task names</span>
<span class="w"> </span><span class="c1">## verify using ./gradlew tasks</span>
<span class="w"> </span><span class="na">scriptAppFoldersCSV</span><span class="o">=</span><span class="s">SampleAppReact16,SampleAppReact18</span>
</code></pre></div></li>
</ul>
</li>
<li>
<p>Create or update the package.json file for each of the submodule to enumerate the libraries that will be included.</p>
<ul>
<li>DxModule/SubModuleReact16/package.json and DxModule/SubModuleReact18/package.json
<div class="language-json highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;WebAppDxModule&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;main&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;modules-index.js&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;test&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;build-dxsubmodule&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;webpack --config  webpack.react16.js&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;author&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;license&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ISC&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;react&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^18.2.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;react-dom&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^18.2.0&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;css-loader&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^6.7.1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;file-loader&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^6.2.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;mini-css-extract-plugin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^2.6.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;mini-svg-data-uri&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^1.4.4&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;terser-webpack-plugin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^5.3.3&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;ts-loader&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^9.3.1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;typescript&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^4.7.4&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;webpack&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^5.73.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;webpack-cli&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^4.10.0&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;overrides&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></li>
<li>Set the appropriate dependencies for the submodule. DxModule/SubModuleReact16/package.json
<div class="language-json highlight"><pre><span></span><code><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;react&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^16.14.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;react-dom&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^16.14.0&quot;</span>
<span class="p">},</span>
</code></pre></div></li>
<li>Set the appropriate dependencies for the submodule. DxModule/SubModuleReact18/package.json
<div class="language-json highlight"><pre><span></span><code><span class="nt">&quot;dependencies&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;react&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^18.2.0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;react-dom&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^18.2.0&quot;</span>
<span class="p">},</span>
</code></pre></div></li>
<li>Make sure to set the main file to modules-index.js
<div class="language-json highlight"><pre><span></span><code><span class="nt">&quot;main&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;modules-index.js&quot;</span><span class="p">,</span>
</code></pre></div></li>
<li>Make sure to add the build-dx-modules among the scripts. DxModule/SubModuleReact16/package.json:
<div class="language-json highlight"><pre><span></span><code><span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="err">...</span>
<span class="w">  </span><span class="nt">&quot;build-dxsubmodule&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;webpack --config  webpack.react16.js&quot;</span>
<span class="p">},</span>
</code></pre></div></li>
<li>Make sure to add the build-dx-modules among the scripts. DxModule/SubModuleReact18/package.json:
<div class="language-json highlight"><pre><span></span><code><span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="err">...</span>
<span class="w">  </span><span class="nt">&quot;build-dxsubmodule&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;webpack --config  webpack.react18.js&quot;</span>
<span class="p">},</span>
</code></pre></div></li>
</ul>
</li>
<li>
<p>Add a module-index.js file to each of the submodule. Enumerate the Javascript libraries and components via import and export commands in the file. Provide descriptive aliases for the group of libraries and components that will be included.</p>
<ul>
<li>
<p>DxModule/SubModuleReact16/module-index.js
   <div class="language-js highlight"><pre><span></span><code><span class="cm">/* Import and Export Main Libraries</span>
<span class="cm"> */</span>
<span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">React16</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">ReactDOM16</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react-dom&#39;</span><span class="p">;</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">ReactV16</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">React</span><span class="o">:</span><span class="w"> </span><span class="nx">React16</span><span class="p">,</span>
<span class="w">    </span><span class="nx">ReactDOM</span><span class="o">:</span><span class="w"> </span><span class="nx">ReactDOM16</span>
<span class="p">};</span>
<span class="cm">/* Export index file for the styles (added here to be able to share the filename of JS bundle&#39;s alias in Webpack entry config).</span>
<span class="cm"> */</span>
<span class="k">export</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./styles-index.css&#39;</span><span class="w">    </span>
</code></pre></div></p>
</li>
<li>
<p>DxModule/SubModuleReact18/module-index.js
   <div class="language-js highlight"><pre><span></span><code><span class="cm">/* Import and Export Main Libraries</span>
<span class="cm"> */</span>
<span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">React18</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">ReactDOM18</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;react-dom&#39;</span><span class="p">;</span>
<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">ReactV18</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">React</span><span class="o">:</span><span class="w"> </span><span class="nx">React18</span><span class="p">,</span>
<span class="w">    </span><span class="nx">ReactDOM</span><span class="o">:</span><span class="w"> </span><span class="nx">ReactDOM18</span>
<span class="p">};</span>
<span class="cm">/* Export index file for the styles (added here to be able to share the filename of JS bundle&#39;s alias in Webpack entry config).</span>
<span class="cm"> */</span>
<span class="k">export</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;./styles-index.css&#39;</span><span class="w">    </span>
</code></pre></div></p>
</li>
</ul>
</li>
<li>
<p>Add a styles-index.css file to each of the submodule. Enumerate via import statements the component styling (CSS, SCSS, etc.) required that are not yet imported by any JS nor HTML files in the modules-index.js. Leave it empty if no imports are needed at the moment.</p>
<ul>
<li>DxModule/SubModuleReact16/styles-index.css  and DxModule/SubModuleReact16/styles-index.css
  <div class="language-js highlight"><pre><span></span><code><span class="w">  </span><span class="cm">/* sample import:</span>
<span class="cm">   *    @import &#39;smart-webcomponents-react/source/styles/smart.default.css&#39;;</span>
<span class="cm">   */</span>
</code></pre></div></li>
</ul>
</li>
<li>Add a DxModule/settings.gradle file. Set the value of the rootProject.name. It will be used as the name of the DX Module (war file, ear file, etc.) and the names and ids in the deployment descriptors (web context path, etc.).
    <div class="language-groovy highlight"><pre><span></span><code><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;React16AndReact18&#39;</span>
</code></pre></div></li>
<li>Add a tsconfig.json file to each of the submodules:</li>
<li>DxModule/SubModuleReact16/tsconfig.json and DxModule/SubModuleReact18/tsconfig.json
   <div class="language-json highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;compilerOptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;outDir&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./dist/&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;noImplicitAny&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;es6&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;es5&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;allowJs&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;moduleResolution&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;node&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;resolveJsonModule&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;esModuleInterop&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></li>
</ol>
<h3 id="add-a-gradle-build-script">Add a Gradle Build Script</h3>
<ol>
<li>Add a DxModule/build.gradle file with the following content:
   <div class="language-groovy highlight"><pre><span></span><code><span class="n">plugins</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="s1">&#39;ear&#39;</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="s1">&#39;war&#39;</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="s2">&quot;com.github.node-gradle.node&quot;</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="s2">&quot;3.4.0&quot;</span>
<span class="o">}</span>
<span class="n">OperatingSystem</span><span class="w"> </span><span class="n">os</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">org</span><span class="o">.</span><span class="na">gradle</span><span class="o">.</span><span class="na">nativeplatform</span><span class="o">.</span><span class="na">platform</span><span class="o">.</span><span class="na">internal</span><span class="o">.</span><span class="na">DefaultNativePlatform</span><span class="o">.</span><span class="na">getCurrentOperatingSystem</span><span class="o">()</span>
<span class="n">Architecture</span><span class="w"> </span><span class="n">arch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">org</span><span class="o">.</span><span class="na">gradle</span><span class="o">.</span><span class="na">nativeplatform</span><span class="o">.</span><span class="na">platform</span><span class="o">.</span><span class="na">internal</span><span class="o">.</span><span class="na">DefaultNativePlatform</span><span class="o">.</span><span class="na">getCurrentArchitecture</span><span class="o">()</span>
<span class="kt">def</span><span class="w"> </span><span class="n">dxClientExec</span><span class="o">=</span><span class="s1">&#39;dxclient&#39;</span>
<span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">os</span><span class="o">.</span><span class="na">windows</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">dxClientExec</span><span class="o">=</span><span class="s1">&#39;dxclient.bat&#39;</span>
<span class="o">}</span>


<span class="n">group</span><span class="w"> </span><span class="s1">&#39;com.company.dx.module.custom&#39;</span>
<span class="c1">//version &#39;1.0-SNAPSHOT&#39;</span>

<span class="n">sourceCompatibility</span><span class="o">=</span><span class="mi">11</span>
<span class="n">targetCompatibility</span><span class="o">=</span><span class="mi">11</span>

<span class="n">repositories</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">mavenLocal</span><span class="o">()</span>
<span class="w">    </span><span class="n">mavenCentral</span><span class="o">()</span>
<span class="w">    </span><span class="n">maven</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">url</span><span class="w"> </span><span class="s2">&quot;https://plugins.gradle.org/m2/&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>

<span class="n">dependencies</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">deploy</span><span class="w"> </span><span class="n">files</span><span class="o">(</span><span class="n">war</span><span class="o">)</span>
<span class="o">}</span>

<span class="c1">// to make sure old files are not going to mix in the bundle</span>
<span class="n">task</span><span class="w"> </span><span class="n">deleteDistDxModule</span><span class="o">{</span>
<span class="w">    </span><span class="n">delete</span><span class="o">(</span><span class="n">file</span><span class="o">(</span><span class="s2">&quot;dist-dx-module&quot;</span><span class="o">))</span>
<span class="o">}</span>

<span class="kt">def</span><span class="w"> </span><span class="n">subModules</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;subModulesCSV&quot;</span><span class="o">).</span><span class="na">split</span><span class="o">(</span><span class="s2">&quot;,&quot;</span><span class="o">)</span>
<span class="kt">def</span><span class="w"> </span><span class="n">allSubModulesTasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">tasks</span><span class="o">.</span><span class="na">named</span><span class="o">(</span><span class="s2">&quot;deleteDistDxModule&quot;</span><span class="o">)]</span>

<span class="n">subModules</span><span class="o">.</span><span class="na">each</span><span class="o">{</span><span class="w"> </span><span class="n">subModule</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="kt">def</span><span class="w"> </span><span class="n">appName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subModule</span><span class="o">.</span><span class="na">trim</span><span class="o">().</span><span class="na">replaceAll</span><span class="o">(</span><span class="s1">&#39;-&#39;</span><span class="o">,</span><span class="s1">&#39;&#39;</span><span class="o">).</span><span class="na">replaceAll</span><span class="o">(</span><span class="s1">&#39;_&#39;</span><span class="o">,</span><span class="s1">&#39;&#39;</span><span class="o">);</span>
<span class="w">    </span><span class="n">allSubModulesTasks</span><span class="o">.</span><span class="na">add</span><span class="w"> </span><span class="o">(</span>
<span class="w">            </span><span class="n">tasks</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;npmInstall&#39;</span><span class="o">+</span><span class="n">appName</span><span class="o">,</span><span class="w"> </span><span class="n">NpxTask</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">                </span><span class="n">shouldRunAfter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;deleteDistDxModule&quot;</span><span class="o">]</span>
<span class="w">                </span><span class="n">workingDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s2">&quot;${project.projectDir}/${subModule}&quot;</span><span class="o">)</span>
<span class="w">                </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;npm&#39;</span>
<span class="w">                </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;install&#39;</span><span class="o">]</span>
<span class="w">            </span><span class="o">});</span>
<span class="w">    </span><span class="n">allSubModulesTasks</span><span class="o">.</span><span class="na">add</span><span class="w"> </span><span class="o">(</span>
<span class="w">            </span><span class="n">tasks</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;npmBuild&#39;</span><span class="o">+</span><span class="n">appName</span><span class="o">,</span><span class="w"> </span><span class="n">NpxTask</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">                </span><span class="n">shouldRunAfter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;npmInstall&#39;</span><span class="o">+</span><span class="n">appName</span><span class="o">]</span>
<span class="w">                </span><span class="n">workingDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s2">&quot;${project.projectDir}/${subModule}&quot;</span><span class="o">)</span>
<span class="w">                </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;npm&#39;</span>
<span class="w">                </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;run&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;build-dxsubmodule&#39;</span><span class="o">]</span>
<span class="w">            </span><span class="o">});</span>
<span class="o">}</span>

<span class="n">task</span><span class="w"> </span><span class="nf">buildAllSubModules</span><span class="o">(</span><span class="nl">dependsOn:</span><span class="w"> </span><span class="n">allSubModulesTasks</span><span class="o">){</span>
<span class="w">    </span><span class="c1">// an array named allSubModulesTasks was dynamically generated from the subModules array to contain all needed npm calls</span>
<span class="w">    </span><span class="c1">// all tasks needed were invoked via dependsOn parameter, so now we just need to echo that it&#39;s done</span>
<span class="w">    </span><span class="n">doLast</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="s1">&#39;Task buildAllSubModules done&#39;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>

<span class="c1">// to make sure the latest rootProject.name is in the web.xml file</span>
<span class="n">task</span><span class="w"> </span><span class="n">deleteWebXml</span><span class="o">{</span>
<span class="w">    </span><span class="n">delete</span><span class="o">(</span><span class="n">file</span><span class="o">(</span><span class="s2">&quot;build/tmp/war/web.xml&quot;</span><span class="o">))</span>
<span class="o">}</span>

<span class="n">task</span><span class="w"> </span><span class="nf">prepareWebXml</span><span class="w"> </span><span class="o">(</span><span class="nl">type:</span><span class="w"> </span><span class="n">Copy</span><span class="o">,</span><span class="w"> </span><span class="nl">dependsOn:</span><span class="w"> </span><span class="s1">&#39;deleteWebXml&#39;</span><span class="o">){</span>
<span class="w">    </span><span class="n">from</span><span class="w"> </span><span class="s1">&#39;src/main/config/war/web.xml&#39;</span>
<span class="w">    </span><span class="n">into</span><span class="w"> </span><span class="s1">&#39;build/tmp/war/&#39;</span>
<span class="w">    </span><span class="n">filter</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s1">&#39;@@auto-replaced-with-rootProject.name@@&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span><span class="o">)</span><span class="w"> </span><span class="o">}</span>
<span class="o">}</span>

<span class="n">war</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">dependsOn</span><span class="w"> </span><span class="n">buildAllSubModules</span><span class="o">,</span><span class="w"> </span><span class="n">prepareWebXml</span>
<span class="w">    </span><span class="n">webAppDirectory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;src/main/webapp/&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="n">webXml</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;build/tmp/war/web.xml&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="n">from</span><span class="w"> </span><span class="o">(</span><span class="s1">&#39;src/main/config/war/WEB-INF/&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">include</span><span class="w"> </span><span class="s1">&#39;*&#39;</span>
<span class="w">        </span><span class="n">into</span><span class="w"> </span><span class="s1">&#39;WEB-INF&#39;</span>
<span class="w">        </span><span class="n">filter</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s1">&#39;@@auto-replaced-with-rootProject.name@@&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span><span class="o">)</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="n">from</span><span class="w"> </span><span class="o">(</span><span class="s1">&#39;dist-dx-module&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">include</span><span class="w"> </span><span class="s1">&#39;*&#39;</span>
<span class="w">        </span><span class="n">into</span><span class="w"> </span><span class="s1">&#39;/&#39;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="n">manifest</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">attributes</span><span class="w"> </span><span class="s1">&#39;Manifest-Version&#39;</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">attributes</span><span class="w"> </span><span class="s1">&#39;Created-By&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>

<span class="n">ear</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">setLibDirName</span><span class="o">(</span><span class="kc">null</span><span class="o">)</span>
<span class="w">    </span><span class="n">deploymentDescriptor</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">setDisplayName</span><span class="o">(</span><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span><span class="o">)</span>
<span class="w">        </span><span class="n">webModule</span><span class="o">(</span><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span><span class="o">+</span><span class="s1">&#39;.war&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span><span class="o">)</span>
<span class="w">        </span><span class="n">setVersion</span><span class="o">(</span><span class="s1">&#39;1.4&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="n">from</span><span class="w"> </span><span class="o">(</span><span class="s1">&#39;src/main/config/ear/META-INF/&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">include</span><span class="w"> </span><span class="s1">&#39;*&#39;</span>
<span class="w">        </span><span class="n">into</span><span class="w"> </span><span class="s1">&#39;META-INF&#39;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="n">manifest</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">attributes</span><span class="w"> </span><span class="s1">&#39;Manifest-Version&#39;</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">attributes</span><span class="w"> </span><span class="s1">&#39;Created-By&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>

<span class="kt">def</span><span class="w"> </span><span class="nf">getParamValue</span><span class="o">(</span><span class="n">String</span><span class="w"> </span><span class="n">paramName</span><span class="o">){</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">project</span><span class="o">.</span><span class="na">hasProperty</span><span class="o">(</span><span class="n">paramName</span><span class="o">)){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="n">paramName</span><span class="o">)</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">getProperties</span><span class="o">().</span><span class="na">containsKey</span><span class="o">(</span><span class="n">paramName</span><span class="o">)){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="n">paramName</span><span class="o">)</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="o">}</span>

<span class="kt">def</span><span class="w"> </span><span class="nf">checkRequiredParam</span><span class="o">(</span><span class="n">String</span><span class="w"> </span><span class="n">paramName</span><span class="o">){</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">getParamValue</span><span class="o">(</span><span class="n">paramName</span><span class="o">).</span><span class="na">trim</span><span class="o">()==</span><span class="s2">&quot;&quot;</span><span class="o">){</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">GradleException</span><span class="o">(</span><span class="s2">&quot;#### Required gradle parameter or env value: -D$paramName=&lt;****&gt; OR -P$paramName=&lt;****&gt; &quot;</span><span class="o">)</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>

<span class="n">task</span><span class="w"> </span><span class="nf">deployDxModule</span><span class="o">(</span><span class="nl">type:</span><span class="n">Exec</span><span class="o">,</span><span class="w"> </span><span class="nl">dependsOn:</span><span class="s1">&#39;ear&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">doFirst</span><span class="o">{</span>
<span class="w">        </span><span class="n">checkRequiredParam</span><span class="o">(</span><span class="s2">&quot;dxUsername&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="n">checkRequiredParam</span><span class="o">(</span><span class="s2">&quot;dxPassword&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="n">logger</span><span class="o">.</span><span class="na">quiet</span><span class="o">(</span><span class="s1">&#39;cd build/libs/&#39;</span><span class="o">)</span>
<span class="w">        </span><span class="n">logger</span><span class="o">.</span><span class="na">quiet</span><span class="o">(</span><span class="s1">&#39;dxclient deploy-application&#39;</span><span class="o">+</span>
<span class="w">                </span><span class="s1">&#39; --dxUsername ****&#39;</span><span class="o">+</span>
<span class="w">                </span><span class="s1">&#39; --dxPassword ****&#39;</span><span class="o">+</span>
<span class="w">                </span><span class="s1">&#39; --dxConnectUsername ****&#39;</span><span class="o">+</span>
<span class="w">                </span><span class="s1">&#39; --dxConnectPassword ****&#39;</span><span class="o">+</span>
<span class="w">                </span><span class="s1">&#39; --applicationFile &#39;</span><span class="o">+</span><span class="w"> </span><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span><span class="o">+</span><span class="s1">&#39;.ear&#39;</span><span class="o">+</span>
<span class="w">                </span><span class="s1">&#39; --applicationName &#39;</span><span class="o">+</span><span class="w"> </span><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span><span class="o">+</span>
<span class="w">                </span><span class="s1">&#39; --dxProtocol &#39;</span><span class="o">+</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;dxProtocol&quot;</span><span class="o">)+</span>
<span class="w">                </span><span class="s1">&#39; --hostname &#39;</span><span class="o">+</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;dxHostname&quot;</span><span class="o">)+</span>
<span class="w">                </span><span class="s1">&#39; --dxPort &#39;</span><span class="o">+</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;dxPort&quot;</span><span class="o">)+</span>
<span class="w">                </span><span class="s1">&#39; --dxProfileName &#39;</span><span class="o">+</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;dxProfileName&quot;</span><span class="o">));</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="n">workingDir</span><span class="w"> </span><span class="s1">&#39;./build/libs&#39;</span>
<span class="w">    </span><span class="n">environment</span><span class="w"> </span><span class="nl">DXCLIENT_DISABLE_INTERACTIVE:</span><span class="s1">&#39;true&#39;</span>
<span class="w">    </span><span class="n">commandLine</span><span class="w"> </span><span class="n">dxClientExec</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;deploy-application&#39;</span><span class="o">,</span>
<span class="w">                </span><span class="s1">&#39;--dxUsername&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">getParamValue</span><span class="o">(</span><span class="s2">&quot;dxUsername&quot;</span><span class="o">),</span>
<span class="w">                </span><span class="s1">&#39;--dxPassword&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">getParamValue</span><span class="o">(</span><span class="s2">&quot;dxPassword&quot;</span><span class="o">),</span>
<span class="w">                </span><span class="s1">&#39;--dxConnectUsername&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">getParamValue</span><span class="o">(</span><span class="s2">&quot;dxUsername&quot;</span><span class="o">),</span>
<span class="w">                </span><span class="s1">&#39;--dxConnectPassword&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">getParamValue</span><span class="o">(</span><span class="s2">&quot;dxPassword&quot;</span><span class="o">),</span>
<span class="w">                </span><span class="s1">&#39;--applicationFile&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span><span class="o">+</span><span class="s1">&#39;.ear&#39;</span><span class="o">,</span>
<span class="w">                </span><span class="s1">&#39;--applicationName&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">rootProject</span><span class="o">.</span><span class="na">name</span><span class="o">,</span>
<span class="w">                </span><span class="s1">&#39;--dxProtocol&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;dxProtocol&quot;</span><span class="o">),</span>
<span class="w">                </span><span class="s1">&#39;--hostname&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;dxHostname&quot;</span><span class="o">),</span>
<span class="w">                </span><span class="s1">&#39;--dxPort&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;dxPort&quot;</span><span class="o">),</span>
<span class="w">                </span><span class="s1">&#39;--dxProfileName&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;dxProfileName&quot;</span><span class="o">)</span>

<span class="w">    </span><span class="n">standardOutput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ByteArrayOutputStream</span><span class="o">()</span>
<span class="w">    </span><span class="n">ext</span><span class="o">.</span><span class="na">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">standardOutput</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>

<span class="kt">def</span><span class="w"> </span><span class="n">allScriptAppsTasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[]</span>
<span class="kt">def</span><span class="w"> </span><span class="n">baseFolder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;baseFolder&quot;</span><span class="o">)</span>
<span class="kt">def</span><span class="w"> </span><span class="n">scriptAppFolders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;scriptAppFoldersCSV&quot;</span><span class="o">).</span><span class="na">split</span><span class="o">(</span><span class="s2">&quot;,&quot;</span><span class="o">)</span>

<span class="n">scriptAppFolders</span><span class="o">.</span><span class="na">each</span><span class="o">{</span><span class="w"> </span><span class="n">folder</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="kt">def</span><span class="w"> </span><span class="n">appName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">folder</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">folder</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s2">&quot;/&quot;</span><span class="o">)+</span><span class="mi">1</span><span class="o">).</span><span class="na">trim</span><span class="o">().</span><span class="na">replaceAll</span><span class="o">(</span><span class="s1">&#39;-&#39;</span><span class="o">,</span><span class="s1">&#39;&#39;</span><span class="o">).</span><span class="na">replaceAll</span><span class="o">(</span><span class="s1">&#39;_&#39;</span><span class="o">,</span><span class="s1">&#39;&#39;</span><span class="o">);</span>
<span class="w">    </span><span class="kt">def</span><span class="w"> </span><span class="n">appBaseFolder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">baseFolder</span><span class="o">+</span><span class="n">folder</span>
<span class="w">    </span><span class="n">allScriptAppsTasks</span><span class="o">.</span><span class="na">add</span><span class="w"> </span><span class="o">(</span>
<span class="w">        </span><span class="n">tasks</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;npmCleanStored&#39;</span><span class="o">+</span><span class="n">appName</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">delete</span><span class="o">(</span><span class="n">file</span><span class="o">(</span><span class="n">appBaseFolder</span><span class="o">+</span><span class="s2">&quot;/store/dist-dx-scriptapp/&quot;</span><span class="o">))</span>
<span class="w">        </span><span class="o">});</span>
<span class="w">    </span><span class="n">allScriptAppsTasks</span><span class="o">.</span><span class="na">add</span><span class="w"> </span><span class="o">(</span>
<span class="w">        </span><span class="n">tasks</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;npmInstall&#39;</span><span class="o">+</span><span class="n">appName</span><span class="o">,</span><span class="w"> </span><span class="n">NpxTask</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">shouldRunAfter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;deployDxModule&#39;</span><span class="o">]</span>
<span class="w">            </span><span class="n">workingDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="n">appBaseFolder</span><span class="o">)</span>
<span class="w">            </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;npm&#39;</span>
<span class="w">            </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;install&#39;</span><span class="o">]</span>
<span class="w">        </span><span class="o">});</span>
<span class="w">    </span><span class="n">allScriptAppsTasks</span><span class="o">.</span><span class="na">add</span><span class="w"> </span><span class="o">(</span>
<span class="w">        </span><span class="n">tasks</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;npmBuild&#39;</span><span class="o">+</span><span class="n">appName</span><span class="o">,</span><span class="w"> </span><span class="n">NpxTask</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">dependsOn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;npmInstall&#39;</span><span class="o">+</span><span class="n">appName</span><span class="o">]</span>
<span class="w">            </span><span class="n">shouldRunAfter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;deployDxModule&#39;</span><span class="o">]</span>
<span class="w">            </span><span class="n">workingDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="n">appBaseFolder</span><span class="o">)</span>
<span class="w">            </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;npm&#39;</span>
<span class="w">            </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;run&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;build&#39;</span><span class="o">]</span>
<span class="w">        </span><span class="o">});</span>
<span class="w">    </span><span class="n">allScriptAppsTasks</span><span class="o">.</span><span class="na">add</span><span class="w"> </span><span class="o">(</span>
<span class="w">        </span><span class="n">tasks</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;deploy&#39;</span><span class="o">+</span><span class="n">appName</span><span class="o">,</span><span class="w"> </span><span class="n">NpxTask</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">dependsOn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;npmBuild&#39;</span><span class="o">+</span><span class="n">appName</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;npmCleanStored&#39;</span><span class="o">+</span><span class="n">appName</span><span class="o">]</span>
<span class="w">            </span><span class="n">shouldRunAfter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;deployDxModule&#39;</span><span class="o">]</span>
<span class="w">            </span><span class="n">environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;dxUsername&#39;</span><span class="o">:</span><span class="n">getParamValue</span><span class="o">(</span><span class="s2">&quot;dxUsername&quot;</span><span class="o">),</span>
<span class="w">                           </span><span class="s1">&#39;dxPassword&#39;</span><span class="o">:</span><span class="n">getParamValue</span><span class="o">(</span><span class="s2">&quot;dxPassword&quot;</span><span class="o">),</span>
<span class="w">                           </span><span class="s1">&#39;dxProtocol&#39;</span><span class="o">:</span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;dxProtocol&quot;</span><span class="o">),</span>
<span class="w">                           </span><span class="s1">&#39;dxHostname&#39;</span><span class="o">:</span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;dxHostname&quot;</span><span class="o">),</span>
<span class="w">                           </span><span class="s1">&#39;dxPort&#39;</span><span class="o">:</span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;dxPort&quot;</span><span class="o">),</span>
<span class="w">                           </span><span class="s1">&#39;DXCLIENT_DISABLE_INTERACTIVE&#39;</span><span class="o">:</span><span class="s1">&#39;true&#39;</span><span class="o">]</span>
<span class="w">            </span><span class="n">workingDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="n">appBaseFolder</span><span class="o">)</span>
<span class="w">            </span><span class="n">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;npm&#39;</span>
<span class="w">            </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;run&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">os</span><span class="o">.</span><span class="na">windows</span><span class="o">?</span><span class="s1">&#39;dx-deploy-app-use-env-win&#39;</span><span class="o">:</span><span class="s1">&#39;dx-deploy-app-use-env&#39;</span><span class="o">]</span>
<span class="w">        </span><span class="o">});</span>
<span class="o">}</span>

<span class="n">task</span><span class="w"> </span><span class="nf">deployAllScriptApps</span><span class="o">(</span><span class="nl">dependsOn:</span><span class="w"> </span><span class="n">allScriptAppsTasks</span><span class="o">){</span>
<span class="w">    </span><span class="c1">// an array named allScriptAppsTasks was dynamically generated from the scriptApps array to contain all needed npm calls</span>
<span class="w">    </span><span class="c1">// all tasks needed were invoked via dependsOn parameter, so now we just need to echo that it&#39;s done</span>
<span class="w">    </span><span class="n">doLast</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="s1">&#39;Task deployAllScriptApps done&#39;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>

<span class="n">task</span><span class="w"> </span><span class="nf">deployAll</span><span class="o">(</span><span class="nl">dependsOn:</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;deployDxModule&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;deployAllScriptApps&#39;</span><span class="o">]){</span>
<span class="w">    </span><span class="c1">// all tasks needed were invoked via dependsOn parameter</span>
<span class="w">    </span><span class="n">doLast</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="s1">&#39;Task deployAll done&#39;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>


<span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">project</span><span class="o">.</span><span class="na">hasProperty</span><span class="o">(</span><span class="s2">&quot;nodeInstall&quot;</span><span class="o">))</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1">// Workaround node grade plugin not working on apple silicon https://github.com/node-gradle/gradle-node-plugin/issues/154</span>
<span class="w">    </span><span class="n">Boolean</span><span class="w"> </span><span class="n">downloadNode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">os</span><span class="o">.</span><span class="na">isMacOsX</span><span class="o">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">arch</span><span class="o">.</span><span class="na">isAmd64</span><span class="o">()</span>
<span class="w">    </span><span class="n">node</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;nodeVersion&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="n">npmVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">project</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">&quot;npmVersion&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="n">download</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">downloadNode</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span><span class="c1">// Copy local node and npm to a fixed location for npmw</span>
<span class="w">    </span><span class="kt">def</span><span class="w"> </span><span class="n">fixedNode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tasks</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="s2">&quot;fixedNode&quot;</span><span class="o">,</span><span class="w"> </span><span class="n">Copy</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">from</span><span class="w"> </span><span class="n">nodeSetup</span>
<span class="w">        </span><span class="n">into</span><span class="w"> </span><span class="s1">&#39;build/node&#39;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="n">tasks</span><span class="o">.</span><span class="na">named</span><span class="o">(</span><span class="s2">&quot;nodeSetup&quot;</span><span class="o">).</span><span class="na">configure</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">finalizedBy</span><span class="w"> </span><span class="n">fixedNode</span><span class="w"> </span><span class="o">}</span>

<span class="w">    </span><span class="kt">def</span><span class="w"> </span><span class="n">fixedNpm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tasks</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="s2">&quot;fixedNpm&quot;</span><span class="o">,</span><span class="w"> </span><span class="n">Copy</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">from</span><span class="w"> </span><span class="n">npmSetup</span>
<span class="w">        </span><span class="n">into</span><span class="w"> </span><span class="s1">&#39;build/node&#39;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="n">tasks</span><span class="o">.</span><span class="na">named</span><span class="o">(</span><span class="s2">&quot;npmSetup&quot;</span><span class="o">).</span><span class="na">configure</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">finalizedBy</span><span class="w"> </span><span class="n">fixedNpm</span><span class="w"> </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div></li>
</ol>
<h3 id="add-webpack-files">Add Webpack Files</h3>
<ol>
<li>Add a webpack file to each of the submodules. Assign a unique filename(path) for the DLL Manifest that could describe the submodule.<ul>
<li>DxModule/SubModuleReact16/webpack.react16.js and DxModule/SubModuleReact18/webpack.react18.js
<div class="language-js highlight"><pre><span></span><code><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">);</span>
<span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">TerserPlugin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;terser-webpack-plugin&quot;</span><span class="p">);</span>
<span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">MiniCssExtractPlugin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mini-css-extract-plugin&#39;</span><span class="p">);</span>
<span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DllPlugin</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack&#39;</span><span class="p">);</span>
<span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">svgToMiniDataURI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mini-svg-data-uri&#39;</span><span class="p">);</span>

<span class="w"> </span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nx">entry</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nx">dxmodules</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./modules-index.js&#39;</span>
<span class="w">     </span><span class="p">},</span>
<span class="w">     </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;production&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;web&#39;</span><span class="p">,</span>
<span class="w">     </span><span class="nx">node</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">global</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span>
<span class="w">     </span><span class="nx">output</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nx">filename</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;[name].bundle.js&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;dist-dx-module&quot;</span><span class="p">),</span>
<span class="w">         </span><span class="nx">library</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;[name]_[fullhash]&quot;</span>
<span class="w">     </span><span class="p">},</span>
<span class="w">     </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">         </span><span class="ow">new</span><span class="w"> </span><span class="nx">DllPlugin</span><span class="p">({</span>
<span class="w">             </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;[name]_[fullhash]&quot;</span><span class="p">,</span>
<span class="w">             </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;./dx-dll-manifest.json&quot;</span><span class="p">),</span>
<span class="w">             </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">         </span><span class="p">}),</span>
<span class="w">         </span><span class="ow">new</span><span class="w"> </span><span class="nx">MiniCssExtractPlugin</span><span class="p">({</span>
<span class="w">             </span><span class="nx">filename</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;[name].bundle.css&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="p">})</span>
<span class="w">     </span><span class="p">],</span>
<span class="w">     </span><span class="nx">resolve</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nx">extensions</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;.ts&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;.js&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;.json&#39;</span><span class="p">]</span>
<span class="w">     </span><span class="p">},</span>
<span class="w">     </span><span class="nx">optimization</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nx">minimizer</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">             </span><span class="ow">new</span><span class="w"> </span><span class="nx">TerserPlugin</span><span class="p">(),</span>
<span class="w">         </span><span class="p">]</span>
<span class="w">     </span><span class="p">},</span>
<span class="w">     </span><span class="nx">module</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nx">rules</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">             </span><span class="p">{</span>
<span class="w">                 </span><span class="nx">test</span><span class="o">:</span><span class="w"> </span><span class="sr">/\.(js|mjs|jsx|ts|tsx)$/</span><span class="p">,</span>
<span class="w">                 </span><span class="nx">use</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ts-loader&#39;</span><span class="p">,</span>
<span class="w">                 </span><span class="nx">exclude</span><span class="o">:</span><span class="w"> </span><span class="sr">/node_modules/</span><span class="p">,</span>
<span class="w">             </span><span class="p">},</span>
<span class="w">             </span><span class="p">{</span>
<span class="w">                 </span><span class="nx">test</span><span class="o">:</span><span class="w"> </span><span class="sr">/\.css$/</span><span class="p">,</span>
<span class="w">                 </span><span class="nx">use</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                     </span><span class="nx">MiniCssExtractPlugin</span><span class="p">.</span><span class="nx">loader</span><span class="p">,</span>
<span class="w">                     </span><span class="s1">&#39;css-loader&#39;</span>
<span class="w">                 </span><span class="p">],</span>
<span class="w">                 </span><span class="nx">exclude</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                     </span><span class="sr">/smart-/</span>
<span class="w">                 </span><span class="p">]</span>
<span class="w">             </span><span class="p">},</span>
<span class="w">             </span><span class="p">{</span>
<span class="w">                 </span><span class="nx">test</span><span class="o">:</span><span class="w"> </span><span class="sr">/\.scss$/</span><span class="p">,</span>
<span class="w">                 </span><span class="nx">use</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                     </span><span class="nx">MiniCssExtractPlugin</span><span class="p">.</span><span class="nx">loader</span><span class="p">,</span>
<span class="w">                     </span><span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>
<span class="w">                     </span><span class="s1">&#39;sass-loader&#39;</span>
<span class="w">                 </span><span class="p">],</span>
<span class="w">             </span><span class="p">},</span>
<span class="w">             </span><span class="p">{</span>
<span class="w">                 </span><span class="nx">test</span><span class="o">:</span><span class="w"> </span><span class="sr">/\.svg/</span><span class="p">,</span>
<span class="w">                 </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;asset/inline&#39;</span><span class="p">,</span>
<span class="w">                 </span><span class="nx">generator</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                     </span><span class="nx">dataUrl</span><span class="o">:</span><span class="w"> </span><span class="nx">content</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                         </span><span class="nx">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">content</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
<span class="w">                         </span><span class="k">return</span><span class="w"> </span><span class="nx">svgToMiniDataURI</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
<span class="w">                     </span><span class="p">}</span>
<span class="w">                 </span><span class="p">}</span>
<span class="w">             </span><span class="p">},</span>
<span class="w">             </span><span class="p">{</span>
<span class="w">                 </span><span class="nx">test</span><span class="o">:</span><span class="w"> </span><span class="sr">/\.(png|jpg|jpeg|gif|woff|woff2|ttf|eot)$/</span><span class="p">,</span>
<span class="w">                 </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;asset&#39;</span>
<span class="w">             </span><span class="p">},</span>
<span class="w">         </span><span class="p">]</span>
<span class="w">     </span><span class="p">},</span>
<span class="w"> </span><span class="p">};</span>
</code></pre></div></li>
<li>DxModule/SubModuleReact16/webpack.react16.js
<div class="language-js highlight"><pre><span></span><code><span class="p">...</span>
<span class="w">        </span><span class="ow">new</span><span class="w"> </span><span class="nx">DllPlugin</span><span class="p">({</span>
<span class="w">            </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;[name]_[fullhash]&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;./dx-dll-manifest-react16.json&quot;</span><span class="p">),</span>
<span class="w">            </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="p">}),</span>
<span class="p">...</span>
</code></pre></div></li>
<li>DxModule/SubModuleReact16/webpack.react18.js
<div class="language-js highlight"><pre><span></span><code><span class="p">...</span>
<span class="w">       </span><span class="ow">new</span><span class="w"> </span><span class="nx">DllPlugin</span><span class="p">({</span>
<span class="w">           </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;[name]_[fullhash]&quot;</span><span class="p">,</span>
<span class="w">           </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;./dx-dll-manifest-react18.json&quot;</span><span class="p">),</span>
<span class="w">           </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">       </span><span class="p">}),</span>
<span class="p">...</span>
</code></pre></div></li>
</ul>
</li>
</ol>
<h3 id="setup-websphere-files">Setup WebSphere Files</h3>
<ol>
<li>
<p>Create the plugin.xml file in the DxModule/src/main/config/war/WEB-INF folder. Note that each generated JS and CSS files in the dist-dx-module folder after a DX Module build needs to be declared in the plugin.xml file.</p>
<ul>
<li>Single Sub Module
<div class="language-xml highlight"><pre><span></span><code><span class="w">  </span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span>
<span class="w">  </span><span class="cp">&lt;?eclipse version=&quot;3.0&quot;?&gt;</span>
<span class="w">  </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;@@auto-replaced-with-rootProject.name@@&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;@@auto-replaced-with-rootProject.name@@&quot;</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;1.0.0&quot;</span><span class="w"> </span><span class="na">provider-name=</span><span class="s">&quot;IBM&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;extension</span><span class="w"> </span><span class="na">point=</span><span class="s">&quot;com.ibm.portal.resourceaggregator.module&quot;</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;@@auto-replaced-with-rootProject.name@@&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;module</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;@@auto-replaced-with-rootProject.name@@&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;contribution</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;sub-contribution</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;js&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="nt">&lt;uri</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;res:{war:context-root}/dxmodules.bundle.js&quot;</span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;uri</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;debug&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;res:{war:context-root}/dxmodules.bundle.js&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/sub-contribution&gt;</span>
<span class="w">            </span><span class="nt">&lt;/contribution&gt;</span>
<span class="w">            </span><span class="nt">&lt;contribution</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;sub-contribution</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;css&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="nt">&lt;uri</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;res:{war:context-root}/dxmodules.bundle.css&quot;</span><span class="nt">/&gt;</span>
<span class="w">                    </span><span class="nt">&lt;uri</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;debug&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;res:{war:context-root}/dxmodules.bundle.css&quot;</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/sub-contribution&gt;</span>
<span class="w">            </span><span class="nt">&lt;/contribution&gt;</span>
<span class="w">        </span><span class="nt">&lt;/module&gt;</span>
<span class="w">    </span><span class="nt">&lt;/extension&gt;</span>
<span class="w">  </span><span class="nt">&lt;/plugin&gt;</span>
</code></pre></div></li>
<li>Multiple Sub Modules
<div class="language-xml highlight"><pre><span></span><code><span class="w"> </span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span>
<span class="w"> </span><span class="cp">&lt;?eclipse version=&quot;3.0&quot;?&gt;</span>
<span class="w"> </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;@@auto-replaced-with-rootProject.name@@&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;@@auto-replaced-with-rootProject.name@@&quot;</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;1.0.0&quot;</span><span class="w"> </span><span class="na">provider-name=</span><span class="s">&quot;IBM&quot;</span><span class="nt">&gt;</span>

<span class="w">   </span><span class="nt">&lt;extension</span><span class="w"> </span><span class="na">point=</span><span class="s">&quot;com.ibm.portal.resourceaggregator.module&quot;</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;@@auto-replaced-with-rootProject.name@@&quot;</span><span class="nt">&gt;</span>
<span class="w">       </span><span class="nt">&lt;module</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;@@auto-replaced-with-rootProject.name@@&quot;</span><span class="nt">&gt;</span>
<span class="w">           </span><span class="nt">&lt;contribution</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span>
<span class="w">               </span><span class="nt">&lt;sub-contribution</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;js&quot;</span><span class="nt">&gt;</span>
<span class="w">                   </span><span class="nt">&lt;uri</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;res:{war:context-root}/react16.bundle.js&quot;</span><span class="nt">/&gt;</span>
<span class="w">                   </span><span class="nt">&lt;uri</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;debug&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;res:{war:context-root}/react16.bundle.js&quot;</span><span class="nt">/&gt;</span>
<span class="w">               </span><span class="nt">&lt;/sub-contribution&gt;</span>
<span class="w">           </span><span class="nt">&lt;/contribution&gt;</span>
<span class="w">           </span><span class="nt">&lt;contribution</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span>
<span class="w">               </span><span class="nt">&lt;sub-contribution</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;js&quot;</span><span class="nt">&gt;</span>
<span class="w">                   </span><span class="nt">&lt;uri</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;res:{war:context-root}/react18.bundle.js&quot;</span><span class="nt">/&gt;</span>
<span class="w">                   </span><span class="nt">&lt;uri</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;debug&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;res:{war:context-root}/react18.bundle.js&quot;</span><span class="nt">/&gt;</span>
<span class="w">               </span><span class="nt">&lt;/sub-contribution&gt;</span>
<span class="w">           </span><span class="nt">&lt;/contribution&gt;</span>
<span class="w">           </span><span class="nt">&lt;contribution</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span>
<span class="w">               </span><span class="nt">&lt;sub-contribution</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;css&quot;</span><span class="nt">&gt;</span>
<span class="w">                   </span><span class="nt">&lt;uri</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;res:{war:context-root}/react16.bundle.css&quot;</span><span class="nt">/&gt;</span>
<span class="w">                   </span><span class="nt">&lt;uri</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;debug&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;res:{war:context-root}/react16.bundle.css&quot;</span><span class="nt">/&gt;</span>
<span class="w">               </span><span class="nt">&lt;/sub-contribution&gt;</span>
<span class="w">           </span><span class="nt">&lt;/contribution&gt;</span>
<span class="w">           </span><span class="nt">&lt;contribution</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span>
<span class="w">               </span><span class="nt">&lt;sub-contribution</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;css&quot;</span><span class="nt">&gt;</span>
<span class="w">                   </span><span class="nt">&lt;uri</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;res:{war:context-root}/react18.bundle.css&quot;</span><span class="nt">/&gt;</span>
<span class="w">                   </span><span class="nt">&lt;uri</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;debug&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;res:{war:context-root}/react18.bundle.css&quot;</span><span class="nt">/&gt;</span>
<span class="w">               </span><span class="nt">&lt;/sub-contribution&gt;</span>
<span class="w">           </span><span class="nt">&lt;/contribution&gt;</span>
<span class="w">       </span><span class="nt">&lt;/module&gt;</span>
<span class="w">   </span><span class="nt">&lt;/extension&gt;</span>
<span class="w"> </span><span class="nt">&lt;/plugin&gt;</span>
</code></pre></div></li>
</ul>
</li>
<li>
<p>Create the was.policy file in the DxModule/src/main/config/ear/META-INF folder:
     <div class="language-text highlight"><pre><span></span><code>//
// Template policy file for enterprise application.
// Extra permissions can be added if required by the enterprise application.
//
// NOTE: Syntax errors in the policy files will cause the enterprise application FAIL to start.
//       Extreme care should be taken when editing these policy files. It is advised to use
//       the policytool provided by the JDK for editing the policy files
//       (WAS_HOME/java/jre/bin/policytool). 
//

grant codeBase &quot;file:${application}&quot; {
    permission java.security.AllPermission;
};

grant codeBase &quot;file:${jars}&quot; {
    permission java.security.AllPermission;
};

grant codeBase &quot;file:${connectorComponent}&quot; {
    permission java.security.AllPermission;
};

grant codeBase &quot;file:${webComponent}&quot; {
    permission java.security.AllPermission;
};

grant codeBase &quot;file:${ejbComponent}&quot; {
    permission java.security.AllPermission;
};
</code></pre></div></p>
</li>
<li>
<p>Create the ibm-web-bnd.xmi file in the DxModule/src/main/config/war/WEB-INF folder:
    <div class="language-xml highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;webappbnd:WebAppBinding</span><span class="w"> </span><span class="na">xmi:version=</span><span class="s">&quot;2.0&quot;</span><span class="w"> </span><span class="na">xmlns:xmi=</span><span class="s">&quot;http://www.omg.org/XMI&quot;</span><span class="w"> </span><span class="na">xmlns:webappbnd=</span><span class="s">&quot;webappbnd.xmi&quot;</span><span class="w"> </span><span class="na">xmi:id=</span><span class="s">&quot;WebAppBinding_1203959801006&quot;</span><span class="w"> </span><span class="na">virtualHostName=</span><span class="s">&quot;default_host&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;webapp</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;WEB-INF/web.xml#@@auto-replaced-with-rootProject.name@@&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/webappbnd:WebAppBinding&gt;</span>
</code></pre></div></p>
</li>
<li>
<p>Create the ibm-web-ext.xmi file in the DxModule/src/main/config/war/WEB-INF folder:
   <div class="language-xml highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;webappext:WebAppExtension</span><span class="w"> </span><span class="na">xmi:version=</span><span class="s">&quot;2.0&quot;</span><span class="w"> </span><span class="na">xmlns:xmi=</span><span class="s">&quot;http://www.omg.org/XMI&quot;</span><span class="w"> </span><span class="na">xmlns:webappext=</span><span class="s">&quot;webappext.xmi&quot;</span><span class="w"> </span><span class="na">xmi:id=</span><span class="s">&quot;WebAppExtension_1203959801006&quot;</span><span class="w"> </span><span class="na">reloadInterval=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">reloadingEnabled=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">additionalClassPath=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">fileServingEnabled=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">directoryBrowsingEnabled=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">serveServletsByClassnameEnabled=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">preCompileJSPs=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;webApp</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;WEB-INF/web.xml#@@auto-replaced-with-rootProject.name@@&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;jspAttributes</span><span class="w"> </span><span class="na">xmi:id=</span><span class="s">&quot;JSPAttribute_1&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;jdkSourceLevel&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;15&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;jspAttributes</span><span class="w"> </span><span class="na">xmi:id=</span><span class="s">&quot;JSPAttribute_2&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;keepgenerated&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/webappext:WebAppExtension&gt;</span>
</code></pre></div></p>
</li>
<li>
<p>Create the template web.xml file in the DxModule/src/main/config/war folder:
   <div class="language-xml highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;web-app</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;@@auto-replaced-with-rootProject.name@@&quot;</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;2.4&quot;</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://java.sun.com/xml/ns/j2ee&quot;</span><span class="w"> </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="w"> </span><span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;display-name&gt;</span>@@auto-replaced-with-rootProject.name@@<span class="nt">&lt;/display-name&gt;</span>
<span class="w">    </span><span class="nt">&lt;context-param&gt;</span>
<span class="w">        </span><span class="nt">&lt;description&gt;</span>A<span class="w"> </span>regular<span class="w"> </span>expression<span class="w"> </span>that<span class="w"> </span>defines<span class="w"> </span>which<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>resources<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>war<span class="w"> </span>file<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>served<span class="w"> </span>by<span class="w"> </span>the<span class="w"> </span>portal<span class="w"> </span>res<span class="w"> </span>datasource.<span class="nt">&lt;/description&gt;</span>
<span class="w">        </span><span class="nt">&lt;param-name&gt;</span>com.ibm.portal.resource.whitelist<span class="nt">&lt;/param-name&gt;</span>
<span class="w">        </span><span class="nt">&lt;param-value&gt;</span>.*<span class="nt">&lt;/param-value&gt;</span>
<span class="w">    </span><span class="nt">&lt;/context-param&gt;</span>
<span class="w">    </span><span class="nt">&lt;context-param&gt;</span>
<span class="w">        </span><span class="nt">&lt;description&gt;</span>A<span class="w"> </span>regular<span class="w"> </span>expression<span class="w"> </span>that<span class="w"> </span>defines<span class="w"> </span>which<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>resources<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>war<span class="w"> </span>file<span class="w"> </span>cannot<span class="w"> </span>be<span class="w"> </span>served<span class="w"> </span>by<span class="w"> </span>the<span class="w"> </span>portal<span class="w"> </span>res<span class="w"> </span>datasource.<span class="nt">&lt;/description&gt;</span>
<span class="w">        </span><span class="nt">&lt;param-name&gt;</span>com.ibm.portal.resource.blacklist<span class="nt">&lt;/param-name&gt;</span>
<span class="w">        </span><span class="nt">&lt;param-value&gt;</span>WEB-INF/.*<span class="nt">&lt;/param-value&gt;</span>
<span class="w">    </span><span class="nt">&lt;/context-param&gt;</span>
<span class="nt">&lt;/web-app&gt;</span>
</code></pre></div></p>
</li>
</ol>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 17, 2022</span>
  </span>

    
    
    
    
  </aside>


  


  



                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019-2024, HCL Technologies Limited -  <a href="#__consent">Change cookie settings</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/HCL-TECH-SOFTWARE" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../../../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.top", "navigation.instant", "navigation.prune", "search.highlight", "search.share", "search.suggest", "navigation.prune", "content.code.copy"], "search": "../../../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../../../assets/javascripts/bundle.081f42fc.min.js"></script>
      
        <script src="../../../../../../javascripts/extra.js"></script>
      
    
  </body>
</html>